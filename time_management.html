<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Management Technique Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            position: relative;
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2em;
            font-weight: 700;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .quiz-section, .results-section, .walkthrough-section {
            display: none;
        }

        .quiz-section.active, .results-section.active, .walkthrough-section.active, .intro-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }

        .question h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .option input[type="radio"] {
            display: none;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 10px 0 0;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .results-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .results-card h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        .technique-description {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .walkthrough-steps {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .step {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            position: relative;
        }

        .step-number {
            background: #667eea;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: absolute;
            left: -15px;
            top: 20px;
        }

        .interactive-demo {
            background: #e8f5e8;
            border: 2px solid #4ecdc4;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .demo-timer {
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            margin: 20px 0;
        }

        .timer-controls {
            text-align: center;
            margin: 20px 0;
        }

        .task-list {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .task-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid #e9ecef;
        }

        .task-item:hover {
            background: #e9ecef;
        }

        .task-item.completed {
            background: #d4edda;
            border-left-color: #28a745;
            text-decoration: line-through;
            opacity: 0.7;
        }

        .matrix-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .matrix-quadrant {
            background: white;
            border-radius: 10px;
            padding: 20px;
            min-height: 120px;
            border: 2px solid #e9ecef;
            position: relative;
        }

        .quadrant-1 { border-color: #dc3545; }
        .quadrant-2 { border-color: #28a745; }
        .quadrant-3 { border-color: #ffc107; }
        .quadrant-4 { border-color: #6c757d; }

        .quadrant-label {
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .intro-section {
            display: none;
        }

        .intro-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .matrix-grid {
                grid-template-columns: 1fr;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1em;
                margin: 10px 5px 0 0;
            }
        }

        /* Technique card hover effects */
        .technique-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-left-width: 8px;
        }

        /* Task batching specific styles */
        .batch-category {
            background: white;
            border-radius: 10px;
            padding: 15px;
            border: 2px solid #e9ecef;
        }
        
        .batch-category h4 {
            margin-bottom: 10px;
            color: #667eea;
        }
        
        .batch-tasks {
            min-height: 100px;
            margin-bottom: 10px;
        }
        
        .batch-category input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.9em;
        }
        
        .batch-task-item {
            background: #f8f9fa;
            border-radius: 5px;
            padding: 8px;
            margin: 5px 0;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .batch-task-item:hover {
            background: #e9ecef;
        }

        /* Drag and drop styles */
        .draggable {
            cursor: move;
        }
        
        .draggable:hover {
            opacity: 0.8;
        }
        
        .drop-zone {
            min-height: 100px;
            border: 2px dashed transparent;
            transition: all 0.3s ease;
        }
        
        .drop-zone.drag-over {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        /* Pickle jar styles */
        .jar-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .jar {
            width: 200px;
            height: 300px;
            border: 3px solid #333;
            border-radius: 0 0 20px 20px;
            margin: 0 auto;
            position: relative;
            background: #f8f9fa;
            overflow: hidden;
        }
        
        .jar-contents {
            position: absolute;
            bottom: 0;
            width: 100%;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Introduction Section -->
        <div class="intro-section active" id="intro">
            <h1>🎯 Time Management Mastery</h1>
            <p class="subtitle">Find your perfect productivity technique or explore them all</p>
            
            <div style="text-align: center; margin: 30px 0;">
                <div style="background: #f8f9fa; border-radius: 15px; padding: 25px; margin-bottom: 20px;">
                    <h3 style="color: #2c3e50; margin-bottom: 15px;">Welcome to Your Productivity Journey!</h3>
                    <p style="color: #6c757d; margin-bottom: 20px;">
                        Take our assessment to get a personalized recommendation, or click any technique below to learn about it directly.
                    </p>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <button class="btn" onclick="startQuiz()" style="font-size: 1.2em; padding: 18px 36px;">🎯 Take Assessment</button>
                        <p style="margin-top: 10px; color: #666; font-size: 0.9em;">Get a personalized recommendation based on your needs</p>
                    </div>
                    
                    <div style="border-top: 2px solid #e9ecef; margin: 25px 0; padding-top: 20px;">
                        <h4 style="color: #2c3e50; margin-bottom: 20px;">Or Choose a Technique to Learn About:</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div class="technique-card" onclick="goDirectToTechnique('pomodoro')" style="background: white; border-radius: 12px; padding: 20px; border-left: 5px solid #ff6b6b; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <strong style="font-size: 1.1em;">🍅 Pomodoro Technique</strong><br>
                                <small style="color: #666; line-height: 1.4;">Work in focused 25-minute intervals with breaks</small><br>
                                <small style="color: #ff6b6b; font-weight: 600;">Best for: Easily distracted learners</small>
                            </div>
                            <div class="technique-card" onclick="goDirectToTechnique('eat_frog')" style="background: white; border-radius: 12px; padding: 20px; border-left: 5px solid #4ecdc4; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <strong style="font-size: 1.1em;">🐸 Eat That Frog</strong><br>
                                <small style="color: #666; line-height: 1.4;">Tackle your biggest challenge first thing</small><br>
                                <small style="color: #4ecdc4; font-weight: 600;">Best for: Procrastinators</small>
                            </div>
                            <div class="technique-card" onclick="goDirectToTechnique('one_three_five')" style="background: white; border-radius: 12px; padding: 20px; border-left: 5px solid #45b7d1; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <strong style="font-size: 1.1em;">📋 1-3-5 Method</strong><br>
                                <small style="color: #666; line-height: 1.4;">Focus on 1 big, 3 medium, 5 small tasks daily</small><br>
                                <small style="color: #45b7d1; font-weight: 600;">Best for: Overwhelmed students</small>
                            </div>
                            <div class="technique-card" onclick="goDirectToTechnique('two_minute')" style="background: white; border-radius: 12px; padding: 20px; border-left: 5px solid #96ceb4; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <strong style="font-size: 1.1em;">⚡ 2-Minute Rule</strong><br>
                                <small style="color: #666; line-height: 1.4;">If it takes less than 2 minutes, do it now</small><br>
                                <small style="color: #96ceb4; font-weight: 600;">Best for: Quick wins & momentum</small>
                            </div>
                            <div class="technique-card" onclick="goDirectToTechnique('eisenhower')" style="background: white; border-radius: 12px; padding: 20px; border-left: 5px solid #feca57; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <strong style="font-size: 1.1em;">⚖️ Eisenhower Matrix</strong><br>
                                <small style="color: #666; line-height: 1.4;">Organize tasks by urgency and importance</small><br>
                                <small style="color: #feca57; font-weight: 600;">Best for: Decision-making clarity</small>
                            </div>
                            <div class="technique-card" onclick="goDirectToTechnique('gtd_method')" style="background: white; border-radius: 12px; padding: 20px; border-left: 5px solid #a29bfe; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <strong style="font-size: 1.1em;">📥 Getting Things Done</strong><br>
                                <small style="color: #666; line-height: 1.4;">Comprehensive system for managing everything</small><br>
                                <small style="color: #a29bfe; font-weight: 600;">Best for: Systematic organizers</small>
                            </div>
                            <div class="technique-card" onclick="goDirectToTechnique('pickle_jar')" style="background: white; border-radius: 12px; padding: 20px; border-left: 5px solid #fd79a8; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <strong style="font-size: 1.1em;">🫙 Pickle Jar Theory</strong><br>
                                <small style="color: #666; line-height: 1.4;">Fill your day with big rocks, pebbles, sand</small><br>
                                <small style="color: #fd79a8; font-weight: 600;">Best for: Visual learners</small>
                            </div>
                            <div class="technique-card" onclick="goDirectToTechnique('task_batching')" style="background: white; border-radius: 12px; padding: 20px; border-left: 5px solid #00b894; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <strong style="font-size: 1.1em;">📦 Task Batching</strong><br>
                                <small style="color: #666; line-height: 1.4;">Group similar tasks for maximum efficiency</small><br>
                                <small style="color: #00b894; font-weight: 600;">Best for: Context switchers</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Section -->
        <div class="quiz-section" id="quiz">
            <h1>📊 Time Management Assessment</h1>
            <p class="subtitle">Answer these questions to find your ideal productivity technique</p>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            
            <div id="questionContainer"></div>
            
            <div style="text-align: center;">
                <button class="btn" id="nextBtn" onclick="nextQuestion()" disabled>Next Question</button>
                <button class="btn" id="submitBtn" onclick="submitQuiz()" style="display: none;">Get My Results</button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="results">
            <div class="results-card">
                <h2 id="recommendedTechnique"></h2>
                <p id="techniqueTagline"></p>
            </div>
            
            <div class="technique-description">
                <h3>📚 About This Technique</h3>
                <p id="techniqueDescription"></p>
                
                <h4 style="margin-top: 20px; color: #667eea;">✨ Why This Works For You:</h4>
                <ul id="whyItWorks" style="margin-left: 20px; color: #6c757d;"></ul>
            </div>
            
            <div style="text-align: center;">
                <button class="btn" onclick="startWalkthrough()">Start Interactive Walkthrough</button>
                <button class="btn btn-secondary" onclick="goBackHome()">🏠 Explore Other Techniques</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">🎯 Take Assessment</button>
            </div>
        </div>

        <!-- Walkthrough Section -->
        <div class="walkthrough-section" id="walkthrough">
            <h1 id="walkthroughTitle"></h1>
            <p class="subtitle">Learn by doing with this interactive guide</p>
            
            <div id="walkthroughContent"></div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="showResults()">⬅️ Back to Overview</button>
                <button class="btn" onclick="goBackHome()">🏠 Explore Other Techniques</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentQuestion = 0;
        let answers = {};
        let recommendedTechnique = '';
        let timerInterval = null;
        let gameState = {};

        const questions = [
            {
                question: "How would you describe your biggest challenge with time management?",
                options: [
                    { text: "I get easily distracted and lose focus", points: { pomodoro: 3, task_batching: 1 } },
                    { text: "I procrastinate on important tasks", points: { eat_frog: 3, two_minute: 1 } },
                    { text: "I feel overwhelmed by my to-do list", points: { one_three_five: 3, eisenhower: 2 } },
                    { text: "I don't know how to prioritize effectively", points: { eisenhower: 3, gtd_method: 2 } }
                ]
            },
            {
                question: "What time of day do you feel most productive?",
                options: [
                    { text: "Early morning - I'm fresh and motivated", points: { eat_frog: 2, eisenhower: 1 } },
                    { text: "Throughout the day in short bursts", points: { pomodoro: 3, two_minute: 2 } },
                    { text: "It varies - I need structure to stay consistent", points: { one_three_five: 2, task_batching: 2 } },
                    { text: "I'm not sure - I feel scattered all day", points: { gtd_method: 2, pickle_jar: 1 } }
                ]
            },
            {
                question: "How do you typically handle interruptions while studying/working?",
                options: [
                    { text: "I get completely derailed and struggle to refocus", points: { pomodoro: 3, task_batching: 1 } },
                    { text: "I try to handle them quickly then get back to work", points: { two_minute: 3, gtd_method: 1 } },
                    { text: "I note them down to deal with later", points: { gtd_method: 2, eisenhower: 2 } },
                    { text: "I tend to avoid interruptions by planning ahead", points: { eat_frog: 1, one_three_five: 2 } }
                ]
            },
            {
                question: "What describes your ideal work session?",
                options: [
                    { text: "One major task completed start to finish", points: { eat_frog: 3, one_three_five: 1 } },
                    { text: "Several small wins throughout the day", points: { two_minute: 2, one_three_five: 2 } },
                    { text: "Focused 25-30 minute chunks with breaks", points: { pomodoro: 3, task_batching: 1 } },
                    { text: "A mix of different types of tasks organized efficiently", points: { task_batching: 3, eisenhower: 2 } }
                ]
            },
            {
                question: "How do you feel about making decisions under pressure?",
                options: [
                    { text: "I freeze up and need clear frameworks", points: { eisenhower: 3, gtd_method: 2 } },
                    { text: "I do better with simple, quick decisions", points: { two_minute: 2, one_three_five: 1 } },
                    { text: "I prefer to tackle big decisions when I'm fresh", points: { eat_frog: 2, pickle_jar: 1 } },
                    { text: "I work better with structured time limits", points: { pomodoro: 2, task_batching: 2 } }
                ]
            },
            {
                question: "What motivates you most when working on tasks?",
                options: [
                    { text: "Completing one significant accomplishment", points: { eat_frog: 3, one_three_five: 1 } },
                    { text: "Checking off multiple small items", points: { two_minute: 3, gtd_method: 1 } },
                    { text: "Working in focused, timed sessions", points: { pomodoro: 3, task_batching: 1 } },
                    { text: "Having a clear system for everything", points: { eisenhower: 2, gtd_method: 3 } }
                ]
            },
            {
                question: "How do you prefer to organize your workspace and tasks?",
                options: [
                    { text: "Simple lists with clear priorities", points: { one_three_five: 2, eat_frog: 1 } },
                    { text: "Categories and systematic organization", points: { gtd_method: 3, eisenhower: 2 } },
                    { text: "Whatever helps me focus in short bursts", points: { pomodoro: 2, two_minute: 1 } },
                    { text: "Grouped by similar types of work", points: { task_batching: 3, pickle_jar: 1 } }
                ]
            },
            {
                question: "When you have multiple responsibilities, you tend to:",
                options: [
                    { text: "Feel overwhelmed and need help prioritizing", points: { eisenhower: 3, one_three_five: 2 } },
                    { text: "Jump between them without finishing any", points: { pomodoro: 2, task_batching: 3 } },
                    { text: "Try to do quick wins first", points: { two_minute: 3, gtd_method: 1 } },
                    { text: "Want to tackle the hardest one first", points: { eat_frog: 3, pickle_jar: 1 } }
                ]
            }
        ];

        const techniques = {
            eat_frog: {
                name: "🐸 Eat That Frog",
                tagline: "Tackle your biggest challenge first thing in the morning",
                description: "Based on Brian Tracy's bestselling book, this technique involves identifying your most important, challenging task (your 'frog') and completing it first thing in the morning when your energy and willpower are highest. By conquering your biggest challenge early, you gain momentum and confidence for the rest of your day.",
                whyItWorks: [
                    "You tend to procrastinate on important tasks",
                    "You have high energy and focus in the morning",
                    "You prefer completing one major accomplishment",
                    "You want to build momentum throughout your day"
                ],
                walkthrough: "eat_frog_walkthrough"
            },
            pomodoro: {
                name: "🍅 Pomodoro Technique",
                tagline: "Work in focused 25-minute intervals with regular breaks",
                description: "Created by Francesco Cirillo, this technique breaks work into 25-minute focused intervals called 'pomodoros', followed by 5-minute breaks. After four pomodoros, you take a longer 15-30 minute break. This method helps maintain concentration and prevents burnout while creating a sense of urgency.",
                whyItWorks: [
                    "You get easily distracted during long work sessions",
                    "You work better with structured time limits",
                    "You prefer working in focused bursts rather than marathon sessions",
                    "You need regular breaks to maintain peak performance"
                ],
                walkthrough: "pomodoro_walkthrough"
            },
            two_minute: {
                name: "⚡ 2-Minute Rule",
                tagline: "If it takes less than 2 minutes, do it now",
                description: "From David Allen's 'Getting Things Done', this rule states that if a task can be completed in less than 2 minutes, you should do it immediately rather than adding it to your to-do list. This prevents small tasks from accumulating and creates momentum through quick wins.",
                whyItWorks: [
                    "You're motivated by completing multiple small tasks",
                    "You handle interruptions well by dealing with them quickly",
                    "You prefer simple decision-making processes",
                    "You want to prevent small tasks from piling up"
                ],
                walkthrough: "two_minute_walkthrough"
            },
            one_three_five: {
                name: "📋 1-3-5 Method",
                tagline: "Focus on 1 big, 3 medium, and 5 small tasks daily",
                description: "This prioritization method limits your daily goals to 9 carefully chosen tasks: 1 big important task, 3 medium tasks, and 5 small tasks. This creates a balanced, achievable workload that prevents overwhelm while ensuring progress on both major goals and routine maintenance.",
                whyItWorks: [
                    "You feel overwhelmed by long to-do lists",
                    "You need structure but also flexibility in your day",
                    "You're motivated by completing a variety of tasks",
                    "You want a balanced approach to productivity"
                ],
                walkthrough: "one_three_five_walkthrough"
            },
            eisenhower: {
                name: "⚖️ Eisenhower Matrix",
                tagline: "Organize tasks by urgency and importance",
                description: "This decision-making framework, used by President Eisenhower, categorizes tasks into four quadrants based on urgency and importance: Do (urgent + important), Schedule (important, not urgent), Delegate (urgent, not important), and Delete (neither urgent nor important).",
                whyItWorks: [
                    "You struggle with prioritizing effectively",
                    "You need clear frameworks for decision-making",
                    "You want to focus on what truly matters",
                    "You have multiple responsibilities and need to delegate"
                ],
                walkthrough: "eisenhower_walkthrough"
            },
            gtd_method: {
                name: "📥 Getting Things Done (GTD)",
                tagline: "Capture, clarify, organize, reflect, and engage with all your tasks",
                description: "David Allen's comprehensive system involves capturing all tasks and ideas in a trusted external system, clarifying what they mean and what action is required, organizing by context and priority, reflecting through regular reviews, and engaging with confidence in your choices.",
                whyItWorks: [
                    "You prefer systematic, comprehensive organization",
                    "You have many different types of responsibilities",
                    "You want a complete system for managing everything",
                    "You're motivated by having clear processes"
                ],
                walkthrough: "gtd_walkthrough"
            },
            pickle_jar: {
                name: "🫙 Pickle Jar Theory",
                tagline: "Fill your day with the right mix of big rocks, pebbles, and sand",
                description: "This visual metaphor suggests that like filling a jar, you should prioritize your 'big rocks' (most important tasks) first, then 'pebbles' (medium tasks), and finally 'sand' (small tasks). This ensures your most important work gets done first.",
                whyItWorks: [
                    "You're a visual learner who likes metaphors",
                    "You want to focus on truly important work",
                    "You need help identifying what's worth your time",
                    "You prefer creative approaches to productivity"
                ],
                walkthrough: "pickle_jar_walkthrough"
            },
            task_batching: {
                name: "📦 Task Batching",
                tagline: "Group similar tasks together for maximum efficiency",
                description: "This technique involves grouping similar tasks together and completing them in dedicated time blocks. By minimizing context switching between different types of work, you maintain focus and momentum while reducing mental fatigue.",
                whyItWorks: [
                    "You jump between different types of tasks",
                    "You manage multiple responsibilities or projects",
                    "You lose focus when constantly switching contexts",
                    "You prefer organized, efficient workflows"
                ],
                walkthrough: "task_batching_walkthrough"
            }
        };

        // Utility functions
        function clearTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function safeGetElement(id) {
            const element = document.getElementById(id);
            if (!element) {
                console.warn(`Element with id '${id}' not found`);
            }
            return element;
        }

        // Quiz functions
        function startQuiz() {
            const intro = safeGetElement('intro');
            const quiz = safeGetElement('quiz');
            
            if (intro) intro.classList.remove('active');
            if (quiz) quiz.classList.add('active');
            
            showQuestion();
        }

        function goDirectToTechnique(techniqueKey) {
            // Set the technique directly without taking quiz
            recommendedTechnique = techniqueKey;
            
            // Hide intro and show results
            const intro = safeGetElement('intro');
            const results = safeGetElement('results');
            
            if (intro) intro.classList.remove('active');
            if (results) results.classList.add('active');
            
            // Populate results
            if (!techniques[recommendedTechnique]) {
                console.error('Technique not found:', recommendedTechnique);
                recommendedTechnique = 'pomodoro'; // fallback
            }
            
            const technique = techniques[recommendedTechnique];
            
            const nameEl = safeGetElement('recommendedTechnique');
            const taglineEl = safeGetElement('techniqueTagline');
            const descEl = safeGetElement('techniqueDescription');
            const whyEl = safeGetElement('whyItWorks');
            
            if (nameEl) nameEl.textContent = technique.name;
            if (taglineEl) taglineEl.textContent = technique.tagline;
            if (descEl) descEl.textContent = technique.description;
            if (whyEl) whyEl.innerHTML = technique.whyItWorks.map(reason => `<li>${reason}</li>`).join('');
        }

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                submitQuiz();
                return;
            }

            const question = questions[currentQuestion];
            const container = safeGetElement('questionContainer');
            
            if (!container) return;
            
            container.innerHTML = `
                <div class="question">
                    <h3>Question ${currentQuestion + 1} of ${questions.length}</h3>
                    <h3>${question.question}</h3>
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div class="option" onclick="selectOption(${index})">
                                <input type="radio" name="q${currentQuestion}" id="q${currentQuestion}_${index}" value="${index}">
                                <label for="q${currentQuestion}_${index}">${option.text}</label>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            updateProgress();
        }

        function selectOption(optionIndex) {
            // Remove previous selections
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Select current option
            const options = document.querySelectorAll('.option');
            if (options[optionIndex]) {
                options[optionIndex].classList.add('selected');
            }
            
            // Store answer
            answers[currentQuestion] = optionIndex;
            
            // Enable next button
            const nextBtn = safeGetElement('nextBtn');
            if (nextBtn) nextBtn.disabled = false;
            
            // Show submit button on last question
            if (currentQuestion === questions.length - 1) {
                const nextBtn = safeGetElement('nextBtn');
                const submitBtn = safeGetElement('submitBtn');
                if (nextBtn) nextBtn.style.display = 'none';
                if (submitBtn) submitBtn.style.display = 'inline-block';
            }
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
            const nextBtn = safeGetElement('nextBtn');
            if (nextBtn) nextBtn.disabled = true;
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            const progressBar = safeGetElement('progressBar');
            if (progressBar) {
                progressBar.style.width = progress + '%';
            }
        }

        function calculateResults() {
            const scores = {};
            
            // Initialize scores
            Object.keys(techniques).forEach(technique => {
                scores[technique] = 0;
            });
            
            // Calculate scores based on answers
            Object.keys(answers).forEach(questionIndex => {
                const question = questions[questionIndex];
                const selectedOption = question.options[answers[questionIndex]];
                
                if (selectedOption && selectedOption.points) {
                    Object.keys(selectedOption.points).forEach(technique => {
                        if (scores.hasOwnProperty(technique)) {
                            scores[technique] += selectedOption.points[technique];
                        }
                    });
                }
            });
            
            // Find highest scoring technique
            let maxScore = 0;
            let recommended = 'pomodoro';
            
            Object.keys(scores).forEach(technique => {
                if (scores[technique] > maxScore) {
                    maxScore = scores[technique];
                    recommended = technique;
                }
            });
            
            return recommended;
        }

        function submitQuiz() {
            recommendedTechnique = calculateResults();
            showResults();
        }

        function showResults() {
            const quiz = safeGetElement('quiz');
            const walkthrough = safeGetElement('walkthrough');
            const results = safeGetElement('results');
            
            if (quiz) quiz.classList.remove('active');
            if (walkthrough) walkthrough.classList.remove('active');
            if (results) results.classList.add('active');
            
            if (!techniques[recommendedTechnique]) {
                console.error('Technique not found:', recommendedTechnique);
                recommendedTechnique = 'pomodoro'; // fallback
            }
            
            const technique = techniques[recommendedTechnique];
            
            const nameEl = safeGetElement('recommendedTechnique');
            const taglineEl = safeGetElement('techniqueTagline');
            const descEl = safeGetElement('techniqueDescription');
            const whyEl = safeGetElement('whyItWorks');
            
            if (nameEl) nameEl.textContent = technique.name;
            if (taglineEl) taglineEl.textContent = technique.tagline;
            if (descEl) descEl.textContent = technique.description;
            if (whyEl) whyEl.innerHTML = technique.whyItWorks.map(reason => `<li>${reason}</li>`).join('');
        }

        function startWalkthrough() {
            const results = safeGetElement('results');
            const walkthrough = safeGetElement('walkthrough');
            
            if (results) results.classList.remove('active');
            if (walkthrough) walkthrough.classList.add('active');
            
            const titleEl = safeGetElement('walkthroughTitle');
            if (titleEl) titleEl.textContent = `Interactive Guide: ${techniques[recommendedTechnique].name}`;
            
            // Clear any existing timers
            clearTimer();
            
            const walkthroughs = {
                eat_frog_walkthrough: createEatFrogWalkthrough,
                pomodoro_walkthrough: createPomodoroWalkthrough,
                two_minute_walkthrough: createTwoMinuteWalkthrough,
                one_three_five_walkthrough: createOneThreeFiveWalkthrough,
                eisenhower_walkthrough: createEisenhowerWalkthrough,
                gtd_walkthrough: createGTDWalkthrough,
                pickle_jar_walkthrough: createPickleJarWalkthrough,
                task_batching_walkthrough: createTaskBatchingWalkthrough
            };
            
            const walkthroughFunction = walkthroughs[techniques[recommendedTechnique].walkthrough];
            if (walkthroughFunction) {
                walkthroughFunction();
            } else {
                console.error('Walkthrough function not found for:', recommendedTechnique);
            }
        }

        function restartQuiz() {
            clearTimer();
            currentQuestion = 0;
            answers = {};
            recommendedTechnique = '';
            gameState = {};
            
            const results = safeGetElement('results');
            const walkthrough = safeGetElement('walkthrough');
            const intro = safeGetElement('intro');
            
            if (results) results.classList.remove('active');
            if (walkthrough) walkthrough.classList.remove('active');
            if (intro) intro.classList.add('active');
        }

        function goBackHome() {
            clearTimer();
            gameState = {};
            
            const results = safeGetElement('results');
            const walkthrough = safeGetElement('walkthrough');
            const quiz = safeGetElement('quiz');
            const intro = safeGetElement('intro');
            
            if (results) results.classList.remove('active');
            if (walkthrough) walkthrough.classList.remove('active');
            if (quiz) quiz.classList.remove('active');
            if (intro) intro.classList.add('active');
        }

        // Walkthrough functions
        function createPomodoroWalkthrough() {
            const content = safeGetElement('walkthroughContent');
            if (!content) return;
            
            let timeLeft = 1500; // 25 minutes in seconds
            let isRunning = false;
            
            content.innerHTML = `
                <div class="walkthrough-steps">
                    <h3>🍅 How to Use the Pomodoro Technique</h3>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Choose Your Task</h4>
                        <p>Select one specific task to focus on during this 25-minute session. Write it down below:</p>
                        <input type="text" id="pomodoroTask" placeholder="What will you work on?" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin-top: 10px;">
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Set Your Timer</h4>
                        <p>Use the timer below to track your 25-minute focus session:</p>
                        <div class="interactive-demo">
                            <div class="demo-timer" id="pomodoroTimer">25:00</div>
                            <div class="timer-controls">
                                <button class="btn" id="startBtn" onclick="startPomodoroTimer()">▶️ Start</button>
                                <button class="btn btn-secondary" id="pauseBtn" onclick="pausePomodoroTimer()" style="display: none;">⏸️ Pause</button>
                                <button class="btn btn-secondary" onclick="resetPomodoroTimer()">🔄 Reset</button>
                            </div>
                            <p id="timerMessage">Click start when you're ready to begin your focused work session!</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Work Without Distractions</h4>
                        <p>During your Pomodoro:</p>
                        <ul>
                            <li>Turn off notifications</li>
                            <li>Close unnecessary browser tabs</li>
                            <li>Focus solely on your chosen task</li>
                            <li>If you think of something else, write it down for later</li>
                        </ul>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Take a 5-Minute Break</h4>
                        <p>When the timer rings, take a 5-minute break:</p>
                        <ul>
                            <li>Stand up and stretch</li>
                            <li>Get some water</li>
                            <li>Step away from your workspace</li>
                            <li>Avoid checking social media or emails</li>
                        </ul>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">5</div>
                        <h4>Repeat and Track</h4>
                        <p>After 4 Pomodoros, take a longer 15-30 minute break. Track your completed sessions:</p>
                        <div id="pomodoroTracker" style="margin-top: 15px;">
                            <strong>Completed Pomodoros Today: <span id="pomodoroCount">0</span>/4</strong>
                            <div id="pomodoroVisual" style="margin-top: 10px; font-size: 1.5em;">
                                🍅🍅🍅🍅
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Define timer functions in global scope
            window.startPomodoroTimer = function() {
                clearTimer(); // Clear any existing timer
                isRunning = true;
                const startBtn = safeGetElement('startBtn');
                const pauseBtn = safeGetElement('pauseBtn');
                const messageEl = safeGetElement('timerMessage');
                
                if (startBtn) startBtn.style.display = 'none';
                if (pauseBtn) pauseBtn.style.display = 'inline-block';
                if (messageEl) messageEl.textContent = 'Focus time! Work on your chosen task.';
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updatePomodoroDisplay();
                    
                    if (timeLeft <= 0) {
                        clearTimer();
                        isRunning = false;
                        if (messageEl) messageEl.textContent = '🎉 Pomodoro complete! Time for a 5-minute break.';
                        if (startBtn) startBtn.style.display = 'inline-block';
                        if (pauseBtn) pauseBtn.style.display = 'none';
                        
                        // Update counter
                        const countEl = safeGetElement('pomodoroCount');
                        if (countEl) {
                            const count = parseInt(countEl.textContent) + 1;
                            countEl.textContent = count;
                            
                            // Update visual
                            const visualEl = safeGetElement('pomodoroVisual');
                            if (visualEl) {
                                let display = '';
                                for (let i = 0; i < 4; i++) {
                                    display += i < count ? '✅' : '🍅';
                                }
                                visualEl.textContent = display;
                            }
                        }
                        
                        resetPomodoroTimer();
                    }
                }, 1000);
            };
            
            window.pausePomodoroTimer = function() {
                clearTimer();
                isRunning = false;
                const startBtn = safeGetElement('startBtn');
                const pauseBtn = safeGetElement('pauseBtn');
                const messageEl = safeGetElement('timerMessage');
                
                if (startBtn) startBtn.style.display = 'inline-block';
                if (pauseBtn) pauseBtn.style.display = 'none';
                if (messageEl) messageEl.textContent = 'Timer paused. Click start to continue.';
            };
            
            window.resetPomodoroTimer = function() {
                clearTimer();
                isRunning = false;
                timeLeft = 1500;
                updatePomodoroDisplay();
                const startBtn = safeGetElement('startBtn');
                const pauseBtn = safeGetElement('pauseBtn');
                const messageEl = safeGetElement('timerMessage');
                
                if (startBtn) startBtn.style.display = 'inline-block';
                if (pauseBtn) pauseBtn.style.display = 'none';
                if (messageEl) messageEl.textContent = 'Click start when you\'re ready to begin your focused work session!';
            };
            
            function updatePomodoroDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                const timerEl = safeGetElement('pomodoroTimer');
                if (timerEl) {
                    timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }
        }

        function createEatFrogWalkthrough() {
            const content = safeGetElement('walkthroughContent');
            if (!content) return;
            
            content.innerHTML = `
                <div class="walkthrough-steps">
                    <h3>🐸 How to Eat That Frog</h3>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Identify Your Frog</h4>
                        <p>Your "frog" is your most important, challenging, or impactful task. Choose your frog for tomorrow:</p>
                        <div class="interactive-demo">
                            <h4>What's Your Biggest Challenge?</h4>
                            <textarea id="frogInput" placeholder="Describe the most important task you've been putting off..." style="width: 100%; height: 80px; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 10px 0;"></textarea>
                            <button class="btn" onclick="identifyFrog()">🎯 This is My Frog!</button>
                            <div id="frogResult" style="margin-top: 15px;"></div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Prepare the Night Before</h4>
                        <p>Set yourself up for success by preparing everything you need:</p>
                        <div class="task-list">
                            <div class="task-item" onclick="toggleTask(this)">📋 Clear your workspace</div>
                            <div class="task-item" onclick="toggleTask(this)">📱 Turn off phone notifications</div>
                            <div class="task-item" onclick="toggleTask(this)">📚 Gather all necessary materials</div>
                            <div class="task-item" onclick="toggleTask(this)">⏰ Set your wake-up time</div>
                            <div class="task-item" onclick="toggleTask(this)">🧠 Visualize completing the task</div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Start First Thing in the Morning</h4>
                        <p>Begin your frog when your energy and willpower are highest:</p>
                        <ul>
                            <li><strong>No email</strong> - Don't check messages first</li>
                            <li><strong>No social media</strong> - Avoid distractions</li>
                            <li><strong>No small tasks</strong> - Save easy wins for later</li>
                            <li><strong>Just your frog</strong> - Go straight to your biggest challenge</li>
                        </ul>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Apply the 80/20 Rule</h4>
                        <p>Focus on the 20% of effort that will produce 80% of your results:</p>
                        <div class="interactive-demo">
                            <h4>Break Down Your Frog</h4>
                            <p>What are the most critical components of your task?</p>
                            <div id="frogBreakdown">
                                <input type="text" placeholder="Most important part (20% that gives 80% of results)" style="width: 100%; padding: 8px; margin: 5px 0; border-radius: 5px; border: 1px solid #ddd;">
                                <input type="text" placeholder="Second priority" style="width: 100%; padding: 8px; margin: 5px 0; border-radius: 5px; border: 1px solid #ddd;">
                                <input type="text" placeholder="Nice to have" style="width: 100%; padding: 8px; margin: 5px 0; border-radius: 5px; border: 1px solid #ddd;">
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">5</div>
                        <h4>Track Your Success</h4>
                        <p>Monitor your frog-eating habit to build momentum:</p>
                        <div id="frogTracker">
                            <strong>Frogs Eaten This Week:</strong>
                            <div style="margin-top: 10px; font-size: 1.5em;">
                                <span onclick="toggleFrogDay(this, 'Mon')" style="cursor: pointer; margin-right: 10px;">Mon: 🐸</span>
                                <span onclick="toggleFrogDay(this, 'Tue')" style="cursor: pointer; margin-right: 10px;">Tue: 🐸</span>
                                <span onclick="toggleFrogDay(this, 'Wed')" style="cursor: pointer; margin-right: 10px;">Wed: 🐸</span>
                                <span onclick="toggleFrogDay(this, 'Thu')" style="cursor: pointer; margin-right: 10px;">Thu: 🐸</span>
                                <span onclick="toggleFrogDay(this, 'Fri')" style="cursor: pointer; margin-right: 10px;">Fri: 🐸</span>
                            </div>
                            <p style="margin-top: 10px; color: #666; font-size: 0.9em;">Click on each day when you complete your frog!</p>
                        </div>
                    </div>
                </div>
            `;
            
            window.identifyFrog = function() {
                const frogInput = safeGetElement('frogInput');
                const frogResult = safeGetElement('frogResult');
                
                if (frogInput && frogResult) {
                    const frogText = frogInput.value.trim();
                    if (frogText) {
                        frogResult.innerHTML = `
                            <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 15px; margin-top: 10px;">
                                <h4 style="color: #155724; margin-bottom: 10px;">🎯 Your Frog is Identified!</h4>
                                <p style="color: #155724; margin-bottom: 10px;"><strong>"${frogText}"</strong></p>
                                <p style="color: #155724; font-size: 0.9em;">Tomorrow morning, tackle this FIRST before anything else!</p>
                            </div>
                        `;
                    }
                }
            };
            
            window.toggleFrogDay = function(element, day) {
                if (element.textContent.includes('✅')) {
                    element.innerHTML = `${day}: 🐸`;
                } else {
                    element.innerHTML = `${day}: ✅`;
                }
            };
        }

        function createTwoMinuteWalkthrough() {
            const content = safeGetElement('walkthroughContent');
            if (!content) return;
            
            content.innerHTML = `
                <div class="walkthrough-steps">
                    <h3>⚡ How to Use the 2-Minute Rule</h3>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Understand the Rule</h4>
                        <p>If a task takes less than 2 minutes to complete, do it immediately instead of adding it to your to-do list.</p>
                        <div class="interactive-demo">
                            <h4>2-Minute Decision Trainer</h4>
                            <p>Practice identifying 2-minute tasks vs. longer tasks:</p>
                            <div id="taskTrainer">
                                <div class="task-item" style="text-align: center; font-size: 1.1em; margin-bottom: 20px; min-height: 60px; display: flex; align-items: center; justify-content: center;" id="currentTaskDisplay">
                                    Click "Next Task" to start training!
                                </div>
                                <div style="text-align: center;">
                                    <button class="btn" onclick="nextTrainingTask()">Next Task</button>
                                    <button class="btn btn-success" onclick="chooseAnswer('do')" id="doBtn" style="display: none;">✓ Do It Now</button>
                                    <button class="btn btn-secondary" onclick="chooseAnswer('schedule')" id="scheduleBtn" style="display: none;">📅 Schedule It</button>
                                </div>
                                <div id="feedbackArea" style="margin-top: 15px;"></div>
                                <div id="scoreArea" style="margin-top: 10px; font-weight: bold;">Score: <span id="score">0</span>/0</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Apply to Your Inbox</h4>
                        <p>Use the 2-minute rule when processing emails:</p>
                        <div class="task-list">
                            <h4>✅ 2-Minute Email Tasks:</h4>
                            <div class="task-item" onclick="toggleTask(this)">Reply to simple questions</div>
                            <div class="task-item" onclick="toggleTask(this)">Forward emails to appropriate people</div>
                            <div class="task-item" onclick="toggleTask(this)">Delete or archive emails</div>
                            <div class="task-item" onclick="toggleTask(this)">Add quick calendar entries</div>
                            <div class="task-item" onclick="toggleTask(this)">Send brief confirmations</div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Practice with Common Tasks</h4>
                        <p>Try the 2-minute rule with these everyday tasks:</p>
                        <div class="interactive-demo">
                            <h4>Your 2-Minute Task List</h4>
                            <div id="quickTasks">
                                <div class="task-item" onclick="completeQuickTask(this)">💧 Fill up water bottle</div>
                                <div class="task-item" onclick="completeQuickTask(this)">📱 Reply to text message</div>
                                <div class="task-item" onclick="completeQuickTask(this)">🗑️ Empty desk trash</div>
                                <div class="task-item" onclick="completeQuickTask(this)">📝 Write down important phone number</div>
                                <div class="task-item" onclick="completeQuickTask(this)">🔌 Plug in phone charger</div>
                                <div class="task-item" onclick="completeQuickTask(this)">📋 File one document</div>
                            </div>
                            <p style="margin-top: 15px; color: #666;">Click tasks as you complete them throughout your day!</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Build the Habit</h4>
                        <p>Make the 2-minute rule automatic:</p>
                        <ul>
                            <li><strong>Set specific times</strong> for processing emails and small tasks</li>
                            <li><strong>Use a timer</strong> to accurately judge 2-minute tasks</li>
                            <li><strong>Batch 2-minute tasks</strong> during transition times</li>
                            <li><strong>Avoid perfectionism</strong> - done is better than perfect for small tasks</li>
                        </ul>
                    </div>
                </div>
            `;
            
            const trainingTasks = [
                { task: "Reply to 'yes/no' email", answer: "do", explanation: "Simple yes/no replies typically take under 2 minutes." },
                { task: "Write a detailed project proposal", answer: "schedule", explanation: "Proposals require research and planning - definitely more than 2 minutes." },
                { task: "File a digital document", answer: "do", explanation: "Filing a single document is quick and easy." },
                { task: "Research vacation destinations", answer: "schedule", explanation: "Research takes time for comparison and evaluation." },
                { task: "Send a meeting confirmation", answer: "do", explanation: "Quick confirmations are perfect 2-minute tasks." },
                { task: "Create a presentation", answer: "schedule", explanation: "Presentations require planning, design, and content creation." },
                { task: "Delete old files from desktop", answer: "do", explanation: "Quick cleanup tasks can often be done immediately." },
                { task: "Plan monthly budget", answer: "schedule", explanation: "Budget planning requires careful thought and calculation." }
            ];
            
            gameState.currentTaskIndex = 0;
            gameState.score = 0;
            gameState.attempts = 0;
            
            window.nextTrainingTask = function() {
                if (gameState.currentTaskIndex < trainingTasks.length) {
                    const task = trainingTasks[gameState.currentTaskIndex];
                    const displayEl = safeGetElement('currentTaskDisplay');
                    const doBtn = safeGetElement('doBtn');
                    const scheduleBtn = safeGetElement('scheduleBtn');
                    const feedbackEl = safeGetElement('feedbackArea');
                    
                    if (displayEl) displayEl.textContent = task.task;
                    if (doBtn) doBtn.style.display = 'inline-block';
                    if (scheduleBtn) scheduleBtn.style.display = 'inline-block';
                    if (feedbackEl) feedbackEl.innerHTML = '';
                } else {
                    const displayEl = safeGetElement('currentTaskDisplay');
                    const doBtn = safeGetElement('doBtn');
                    const scheduleBtn = safeGetElement('scheduleBtn');
                    
                    if (displayEl) displayEl.textContent = '🎉 Training Complete!';
                    if (doBtn) doBtn.style.display = 'none';
                    if (scheduleBtn) scheduleBtn.style.display = 'none';
                    
                    const nextBtn = document.querySelector('[onclick="nextTrainingTask()"]');
                    if (nextBtn) nextBtn.style.display = 'none';
                }
            };
            
            window.chooseAnswer = function(choice) {
                const task = trainingTasks[gameState.currentTaskIndex];
                gameState.attempts++;
                
                const feedbackEl = safeGetElement('feedbackArea');
                const scoreEl = safeGetElement('scoreArea');
                
                if (choice === task.answer) {
                    gameState.score++;
                    if (feedbackEl) {
                        feedbackEl.innerHTML = `
                            <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 10px; color: #155724;">
                                ✅ Correct! ${task.explanation}
                            </div>
                        `;
                    }
                } else {
                    if (feedbackEl) {
                        feedbackEl.innerHTML = `
                            <div style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; padding: 10px; color: #721c24;">
                                ❌ Not quite. ${task.explanation}
                            </div>
                        `;
                    }
                }
                
                if (scoreEl) {
                    scoreEl.innerHTML = `Score: <span id="score">${gameState.score}</span>/${gameState.attempts}`;
                }
                
                gameState.currentTaskIndex++;
                const doBtn = safeGetElement('doBtn');
                const scheduleBtn = safeGetElement('scheduleBtn');
                if (doBtn) doBtn.style.display = 'none';
                if (scheduleBtn) scheduleBtn.style.display = 'none';
                
                setTimeout(() => {
                    const nextBtn = document.querySelector('[onclick="nextTrainingTask()"]');
                    if (nextBtn) {
                        nextBtn.textContent = gameState.currentTaskIndex >= trainingTasks.length ? 'Training Complete!' : 'Next Task';
                    }
                }, 2000);
            };
            
            window.completeQuickTask = function(element) {
                if (!element.classList.contains('completed')) {
                    element.classList.add('completed');
                    element.innerHTML += ' ✅';
                }
            };
        }

        function createOneThreeFiveWalkthrough() {
            const content = safeGetElement('walkthroughContent');
            if (!content) return;
            
            content.innerHTML = `
                <div class="walkthrough-steps">
                    <h3>📋 How to Use the 1-3-5 Method</h3>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Plan Your Perfect Day</h4>
                        <p>Limit yourself to 9 tasks total: 1 big, 3 medium, and 5 small tasks.</p>
                        <div class="interactive-demo">
                            <h4>🎯 Your Big Task (1)</h4>
                            <p>What's the ONE most important thing you need to accomplish?</p>
                            <input type="text" id="bigTask" placeholder="Enter your most important task..." style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 10px 0;">
                            
                            <h4>📈 Your Medium Tasks (3)</h4>
                            <p>Important but not as critical as your big task:</p>
                            <input type="text" id="medium1" placeholder="Medium task 1" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            <input type="text" id="medium2" placeholder="Medium task 2" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            <input type="text" id="medium3" placeholder="Medium task 3" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            
                            <h4>📝 Your Small Tasks (5)</h4>
                            <p>Quick wins and maintenance tasks:</p>
                            <input type="text" id="small1" placeholder="Small task 1" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            <input type="text" id="small2" placeholder="Small task 2" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            <input type="text" id="small3" placeholder="Small task 3" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            <input type="text" id="small4" placeholder="Small task 4" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            <input type="text" id="small5" placeholder="Small task 5" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            
                            <button class="btn" onclick="generateDailyPlan()" style="margin-top: 15px;">Create My 1-3-5 Plan</button>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Your Daily Tracker</h4>
                        <div id="dailyPlan" style="display: none;">
                            <div style="background: #f8f9fa; border-radius: 10px; padding: 20px; margin: 15px 0;">
                                <h4>📅 Today's 1-3-5 Plan</h4>
                                <div id="planDisplay"></div>
                                <div style="margin-top: 20px;">
                                    <strong>Progress: <span id="completionRate">0%</span> Complete</strong>
                                    <div style="background: #e9ecef; height: 8px; border-radius: 4px; margin-top: 5px;">
                                        <div id="progressBar135" style="background: #667eea; height: 100%; border-radius: 4px; width: 0%; transition: width 0.3s ease;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Execution Strategy</h4>
                        <p>Work through your tasks in this order for maximum effectiveness:</p>
                        <div style="background: #e8f5e8; border-radius: 10px; padding: 20px; margin: 15px 0;">
                            <h4>🕐 Morning (Peak Energy)</h4>
                            <p>Start with your <strong>BIG TASK</strong> when your energy and focus are highest.</p>
                            
                            <h4>🕐 Mid-Morning to Afternoon</h4>
                            <p>Tackle your <strong>3 MEDIUM TASKS</strong> when you're still mentally sharp.</p>
                            
                            <h4>🕐 Afternoon/Evening</h4>
                            <p>Complete your <strong>5 SMALL TASKS</strong> when energy is lower but you can still be productive.</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Tips for Success</h4>
                        <ul>
                            <li><strong>Be realistic</strong> - If you can't complete all 9 tasks, you've planned too much</li>
                            <li><strong>Stay flexible</strong> - Adjust categories if needed (1-2-4 or 2-3-3 are fine)</li>
                            <li><strong>Celebrate wins</strong> - Each completed task is progress!</li>
                            <li><strong>Plan the night before</strong> - Set up tomorrow's 1-3-5 list before bed</li>
                        </ul>
                    </div>
                </div>
            `;
            
            gameState.totalTasks135 = 0;
            gameState.completedTasks135 = 0;
            
            window.generateDailyPlan = function() {
                const bigTaskEl = safeGetElement('bigTask');
                const tasks = {
                    big: bigTaskEl ? bigTaskEl.value : '',
                    medium: [],
                    small: []
                };
                
                // Get medium tasks
                for (let i = 1; i <= 3; i++) {
                    const el = safeGetElement(`medium${i}`);
                    if (el && el.value.trim()) {
                        tasks.medium.push(el.value.trim());
                    }
                }
                
                // Get small tasks
                for (let i = 1; i <= 5; i++) {
                    const el = safeGetElement(`small${i}`);
                    if (el && el.value.trim()) {
                        tasks.small.push(el.value.trim());
                    }
                }
                
                let planHTML = '';
                
                if (tasks.big.trim()) {
                    planHTML += `
                        <div style="background: #ff6b6b; color: white; border-radius: 8px; padding: 15px; margin: 10px 0;">
                            <h4>🎯 BIG TASK</h4>
                            <div class="task-item" onclick="togglePlanTask(this)" style="background: rgba(255,255,255,0.2); color: white; border: none;">
                                ${tasks.big}
                            </div>
                        </div>
                    `;
                }
                
                if (tasks.medium.length > 0) {
                    planHTML += `
                        <div style="background: #4ecdc4; color: white; border-radius: 8px; padding: 15px; margin: 10px 0;">
                            <h4>📈 MEDIUM TASKS</h4>
                            ${tasks.medium.map(task => `
                                <div class="task-item" onclick="togglePlanTask(this)" style="background: rgba(255,255,255,0.2); color: white; border: none; margin: 5px 0;">
                                    ${task}
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
                
                if (tasks.small.length > 0) {
                    planHTML += `
                        <div style="background: #45b7d1; color: white; border-radius: 8px; padding: 15px; margin: 10px 0;">
                            <h4>📝 SMALL TASKS</h4>
                            ${tasks.small.map(task => `
                                <div class="task-item" onclick="togglePlanTask(this)" style="background: rgba(255,255,255,0.2); color: white; border: none; margin: 5px 0;">
                                    ${task}
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
                
                const planDisplayEl = safeGetElement('planDisplay');
                const dailyPlanEl = safeGetElement('dailyPlan');
                
                if (planDisplayEl) planDisplayEl.innerHTML = planHTML;
                if (dailyPlanEl) dailyPlanEl.style.display = 'block';
                
                // Store total tasks for progress calculation
                gameState.totalTasks135 = (tasks.big.trim() ? 1 : 0) + tasks.medium.length + tasks.small.length;
                gameState.completedTasks135 = 0;
            };
            
            window.togglePlanTask = function(element) {
                if (!element.classList.contains('completed')) {
                    element.classList.add('completed');
                    element.style.textDecoration = 'line-through';
                    element.style.opacity = '0.7';
                    element.innerHTML += ' ✅';
                    gameState.completedTasks135++;
                } else {
                    element.classList.remove('completed');
                    element.style.textDecoration = 'none';
                    element.style.opacity = '1';
                    element.innerHTML = element.innerHTML.replace(' ✅', '');
                    gameState.completedTasks135--;
                }
                
                // Update progress
                if (gameState.totalTasks135 > 0) {
                    const percentage = Math.round((gameState.completedTasks135 / gameState.totalTasks135) * 100);
                    const rateEl = safeGetElement('completionRate');
                    const progressEl = safeGetElement('progressBar135');
                    
                    if (rateEl) rateEl.textContent = percentage + '%';
                    if (progressEl) progressEl.style.width = percentage + '%';
                }
            };
        }

        function createEisenhowerWalkthrough() {
            const content = safeGetElement('walkthroughContent');
            if (!content) return;
            
            content.innerHTML = `
                <div class="walkthrough-steps">
                    <h3>⚖️ How to Use the Eisenhower Matrix</h3>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Understand the Four Quadrants</h4>
                        <div class="matrix-grid">
                            <div class="matrix-quadrant quadrant-1">
                                <div class="quadrant-label" style="color: #dc3545;">🔴 DO (Urgent + Important)</div>
                                <p style="font-size: 0.9em;">Crises, emergencies, deadline-driven projects</p>
                            </div>
                            <div class="matrix-quadrant quadrant-2">
                                <div class="quadrant-label" style="color: #28a745;">🟢 SCHEDULE (Important, Not Urgent)</div>
                                <p style="font-size: 0.9em;">Planning, prevention, personal development</p>
                            </div>
                            <div class="matrix-quadrant quadrant-3">
                                <div class="quadrant-label" style="color: #ffc107;">🟡 DELEGATE (Urgent, Not Important)</div>
                                <p style="font-size: 0.9em;">Interruptions, some emails, unnecessary meetings</p>
                            </div>
                            <div class="matrix-quadrant quadrant-4">
                                <div class="quadrant-label" style="color: #6c757d;">⚫ DELETE (Not Urgent, Not Important)</div>
                                <p style="font-size: 0.9em;">Time wasters, excessive social media, busy work</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Practice Categorizing Tasks</h4>
                        <p>Click on tasks below, then click the appropriate quadrant to categorize them:</p>
                        <div class="interactive-demo">
                            <h4>📝 Tasks to Categorize</h4>
                            <div id="taskBank" style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin: 10px 0; min-height: 100px;">
                                <div class="task-item" onclick="selectTaskForMatrix(this, 'do')" data-correct="do">
                                    Study for exam tomorrow
                                </div>
                                <div class="task-item" onclick="selectTaskForMatrix(this, 'schedule')" data-correct="schedule">
                                    Plan next semester courses
                                </div>
                                <div class="task-item" onclick="selectTaskForMatrix(this, 'delete')" data-correct="delete">
                                    Scroll through social media
                                </div>
                                <div class="task-item" onclick="selectTaskForMatrix(this, 'delegate')" data-correct="delegate">
                                    Respond to non-critical email
                                </div>
                                <div class="task-item" onclick="selectTaskForMatrix(this, 'do')" data-correct="do">
                                    Complete assignment due today
                                </div>
                                <div class="task-item" onclick="selectTaskForMatrix(this, 'schedule')" data-correct="schedule">
                                    Organize study notes
                                </div>
                            </div>
                            
                            <div class="matrix-grid" style="margin-top: 20px;">
                                <div class="matrix-quadrant quadrant-1 drop-zone" onclick="categorizeTask('do')" data-quadrant="do">
                                    <div class="quadrant-label" style="color: #dc3545;">🔴 DO</div>
                                    <div class="quadrant-tasks" id="do-tasks"></div>
                                </div>
                                <div class="matrix-quadrant quadrant-2 drop-zone" onclick="categorizeTask('schedule')" data-quadrant="schedule">
                                    <div class="quadrant-label" style="color: #28a745;">🟢 SCHEDULE</div>
                                    <div class="quadrant-tasks" id="schedule-tasks"></div>
                                </div>
                                <div class="matrix-quadrant quadrant-3 drop-zone" onclick="categorizeTask('delegate')" data-quadrant="delegate">
                                    <div class="quadrant-label" style="color: #ffc107;">🟡 DELEGATE</div>
                                    <div class="quadrant-tasks" id="delegate-tasks"></div>
                                </div>
                                <div class="matrix-quadrant quadrant-4 drop-zone" onclick="categorizeTask('delete')" data-quadrant="delete">
                                    <div class="quadrant-label" style="color: #6c757d;">⚫ DELETE</div>
                                    <div class="quadrant-tasks" id="delete-tasks"></div>
                                </div>
                            </div>
                            <div style="margin-top: 15px;">
                                <p id="matrixInstructions" style="color: #667eea; font-weight: bold;">Select a task above, then click the appropriate quadrant to categorize it.</p>
                                <button class="btn" onclick="checkMatrix()" style="margin-top: 15px;">Check My Answers</button>
                                <div id="matrixFeedback" style="margin-top: 15px;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Create Your Personal Matrix</h4>
                        <p>Now organize your own tasks using the matrix:</p>
                        <div class="interactive-demo">
                            <h4>Add Your Tasks</h4>
                            <input type="text" id="newTask" placeholder="Enter a task..." style="width: 70%; padding: 10px; border-radius: 5px; border: 1px solid #ddd;">
                            <button class="btn" onclick="addPersonalTask()" style="width: 25%;">Add Task</button>
                            
                            <div id="personalMatrix" class="matrix-grid" style="margin-top: 20px;">
                                <div class="matrix-quadrant quadrant-1" onclick="addToQuadrant('do')">
                                    <div class="quadrant-label" style="color: #dc3545;">🔴 DO</div>
                                    <div id="personal-do-tasks"></div>
                                </div>
                                <div class="matrix-quadrant quadrant-2" onclick="addToQuadrant('schedule')">
                                    <div class="quadrant-label" style="color: #28a745;">🟢 SCHEDULE</div>
                                    <div id="personal-schedule-tasks"></div>
                                </div>
                                <div class="matrix-quadrant quadrant-3" onclick="addToQuadrant('delegate')">
                                    <div class="quadrant-label" style="color: #ffc107;">🟡 DELEGATE</div>
                                    <div id="personal-delegate-tasks"></div>
                                </div>
                                <div class="matrix-quadrant quadrant-4" onclick="addToQuadrant('delete')">
                                    <div class="quadrant-label" style="color: #6c757d;">⚫ DELETE</div>
                                    <div id="personal-delete-tasks"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Take Action</h4>
                        <p>Now that you've organized your tasks, here's what to do:</p>
                        <ul>
                            <li><strong>🔴 DO tasks:</strong> Handle these immediately</li>
                            <li><strong>🟢 SCHEDULE tasks:</strong> Block time in your calendar for these</li>
                            <li><strong>🟡 DELEGATE tasks:</strong> Find someone else to handle these</li>
                            <li><strong>⚫ DELETE tasks:</strong> Eliminate these from your life</li>
                        </ul>
                    </div>
                </div>
            `;
            
            gameState.selectedTask = null;
            gameState.categorizedTasks = [];
            
            window.selectTaskForMatrix = function(element, correctAnswer) {
                // Remove previous selection
                document.querySelectorAll('#taskBank .task-item').forEach(task => {
                    task.style.background = '#f8f9fa';
                    task.style.border = '4px solid #e9ecef';
                });
                
                // Select current task
                element.style.background = '#e9ecef';
                element.style.border = '4px solid #667eea';
                
                gameState.selectedTask = {
                    element: element,
                    text: element.textContent.trim(),
                    correct: correctAnswer
                };
                
                const instructionsEl = safeGetElement('matrixInstructions');
                if (instructionsEl) {
                    instructionsEl.textContent = `Selected: "${gameState.selectedTask.text}" - Now click the appropriate quadrant.`;
                }
            };
            
            window.categorizeTask = function(quadrant) {
                if (!gameState.selectedTask) {
                    const instructionsEl = safeGetElement('matrixInstructions');
                    if (instructionsEl) {
                        instructionsEl.textContent = 'Please select a task first!';
                        instructionsEl.style.color = '#dc3545';
                    }
                    return;
                }
                
                // Move task to quadrant
                const quadrantEl = safeGetElement(quadrant + '-tasks');
                if (quadrantEl) {
                    const taskDiv = document.createElement('div');
                    taskDiv.className = 'task-item';
                    taskDiv.style.fontSize = '0.9em';
                    taskDiv.style.margin = '5px 0';
                    taskDiv.style.background = 'rgba(255,255,255,0.8)';
                    taskDiv.textContent = gameState.selectedTask.text;
                    quadrantEl.appendChild(taskDiv);
                }
                
                // Store for checking
                gameState.categorizedTasks.push({
                    text: gameState.selectedTask.text,
                    chosen: quadrant,
                    correct: gameState.selectedTask.correct
                });
                
                // Remove from task bank
                gameState.selectedTask.element.remove();
                gameState.selectedTask = null;
                
                const instructionsEl = safeGetElement('matrixInstructions');
                if (instructionsEl) {
                    instructionsEl.textContent = 'Select another task to continue, or check your answers.';
                    instructionsEl.style.color = '#667eea';
                }
            };
            
            window.checkMatrix = function() {
                let correct = 0;
                let total = gameState.categorizedTasks.length;
                let feedback = '<h4>Results:</h4>';
                
                gameState.categorizedTasks.forEach(task => {
                    if (task.chosen === task.correct) {
                        correct++;
                        feedback += `<p style="color: #28a745;">✅ ${task.text} - Correct!</p>`;
                    } else {
                        feedback += `<p style="color: #dc3545;">❌ ${task.text} - Should be in ${task.correct.toUpperCase()}</p>`;
                    }
                });
                
                feedback += `<p><strong>Score: ${correct}/${total}</strong></p>`;
                
                const feedbackEl = safeGetElement('matrixFeedback');
                if (feedbackEl) feedbackEl.innerHTML = feedback;
            };
            
            gameState.currentTaskToAdd = '';
            
            window.addPersonalTask = function() {
                const taskInput = safeGetElement('newTask');
                if (taskInput) {
                    const taskText = taskInput.value.trim();
                    if (taskText) {
                        gameState.currentTaskToAdd = taskText;
                        taskInput.value = '';
                        
                        const feedbackEl = safeGetElement('matrixFeedback');
                        if (feedbackEl) {
                            feedbackEl.innerHTML = `
                                <div style="background: #e9ecef; border-radius: 8px; padding: 15px; margin: 10px 0;">
                                    <h4>Where does "${taskText}" belong?</h4>
                                    <p>Click on the appropriate quadrant above to place this task.</p>
                                </div>
                            `;
                        }
                    }
                }
            };
            
            window.addToQuadrant = function(quadrant) {
                if (gameState.currentTaskToAdd) {
                    const quadrantEl = safeGetElement('personal-' + quadrant + '-tasks');
                    if (quadrantEl) {
                        const taskDiv = document.createElement('div');
                        taskDiv.className = 'task-item';
                        taskDiv.style.fontSize = '0.9em';
                        taskDiv.style.margin = '5px 0';
                        taskDiv.textContent = gameState.currentTaskToAdd;
                        taskDiv.onclick = function() { this.remove(); };
                        quadrantEl.appendChild(taskDiv);
                    }
                    
                    gameState.currentTaskToAdd = '';
                    
                    const feedbackEl = safeGetElement('matrixFeedback');
                    if (feedbackEl) feedbackEl.innerHTML = '';
                }
            };
        }

        function createGTDWalkthrough() {
            const content = safeGetElement('walkthroughContent');
            if (!content) return;
            
            content.innerHTML = `
                <div class="walkthrough-steps">
                    <h3>📥 Getting Things Done (GTD) System</h3>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Capture Everything</h4>
                        <p>Get all tasks, ideas, and commitments out of your head and into a trusted system:</p>
                        <div class="interactive-demo">
                            <h4>🧠 Brain Dump Exercise</h4>
                            <p>Write down everything that's on your mind right now:</p>
                            <textarea id="brainDump" placeholder="Everything you need to do, remember, or think about..." style="width: 100%; height: 120px; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 10px 0;"></textarea>
                            <button class="btn" onclick="processBrainDump()">Process My Inputs</button>
                            <div id="captureResults" style="margin-top: 15px;"></div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Clarify What Each Item Means</h4>
                        <p>For each captured item, ask: "What is it?" and "What's the next action?"</p>
                        <div class="interactive-demo">
                            <h4>🔍 Clarification Workflow</h4>
                            <div id="clarifyArea" style="display: none;">
                                <div id="currentItem" style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin: 10px 0;"></div>
                                <div style="margin: 15px 0;">
                                    <h4>Is this actionable?</h4>
                                    <button class="btn" onclick="markActionable(true)">✅ Yes - I need to do something</button>
                                    <button class="btn btn-secondary" onclick="markActionable(false)">❌ No - It's reference/someday</button>
                                </div>
                                <div id="actionArea" style="display: none;">
                                    <h4>What's the very next physical action?</h4>
                                    <input type="text" id="nextAction" placeholder="Next concrete action..." style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 10px 0;">
                                    <div>
                                        <h4>How long will it take?</h4>
                                        <button class="btn" onclick="setDuration('under2')">⚡ Under 2 minutes</button>
                                        <button class="btn" onclick="setDuration('over2')">⏱️ Over 2 minutes</button>
                                    </div>
                                </div>
                                <button class="btn btn-success" onclick="nextClarification()" id="clarifyNext" style="display: none;">Next Item</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Organize by Context and Priority</h4>
                        <div id="organizedLists" style="display: none;">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                                <div style="background: #fff3cd; border-radius: 8px; padding: 15px;">
                                    <h4>⚡ Do Now (Under 2 min)</h4>
                                    <div id="doNowList"></div>
                                </div>
                                <div style="background: #d4edda; border-radius: 8px; padding: 15px;">
                                    <h4>📅 Scheduled Actions</h4>
                                    <div id="scheduledList"></div>
                                </div>
                                <div style="background: #cff4fc; border-radius: 8px; padding: 15px;">
                                    <h4>📋 Next Actions</h4>
                                    <div id="nextActionsList"></div>
                                </div>
                                <div style="background: #e2e3e5; border-radius: 8px; padding: 15px;">
                                    <h4>📚 Reference/Someday</h4>
                                    <div id="referenceList"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Review Regularly</h4>
                        <p>GTD requires regular reviews to keep your system current:</p>
                        <ul>
                            <li><strong>Daily:</strong> Review your calendar and next actions lists</li>
                            <li><strong>Weekly:</strong> Complete weekly review of all lists and projects</li>
                            <li><strong>Monthly:</strong> Review your goals and larger projects</li>
                        </ul>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">5</div>
                        <h4>Engage with Confidence</h4>
                        <p>With everything organized, you can now work with confidence knowing you're doing the right thing at the right time.</p>
                    </div>
                </div>
            `;
            
            gameState.capturedItems = [];
            gameState.currentItemIndex = 0;
            gameState.processedItems = {
                doNow: [],
                scheduled: [],
                nextActions: [],
                reference: []
            };
            
            window.processBrainDump = function() {
                const dumpEl = safeGetElement('brainDump');
                if (!dumpEl) return;
                
                const dumpText = dumpEl.value;
                gameState.capturedItems = dumpText.split('\n').filter(item => item.trim()).map(item => item.trim());
                
                const resultsEl = safeGetElement('captureResults');
                const clarifyEl = safeGetElement('clarifyArea');
                
                if (gameState.capturedItems.length > 0) {
                    if (resultsEl) {
                        resultsEl.innerHTML = `
                            <div style="background: #d4edda; border-radius: 8px; padding: 15px;">
                                <h4>✅ Captured ${gameState.capturedItems.length} items!</h4>
                                <p>Now let's clarify each one...</p>
                            </div>
                        `;
                    }
                    
                    if (clarifyEl) clarifyEl.style.display = 'block';
                    showCurrentItem();
                } else {
                    if (resultsEl) {
                        resultsEl.innerHTML = `
                            <div style="background: #f8d7da; border-radius: 8px; padding: 15px;">
                                <p>Please write down some tasks or ideas first!</p>
                            </div>
                        `;
                    }
                }
            };
            
            function showCurrentItem() {
                if (gameState.currentItemIndex < gameState.capturedItems.length) {
                    const currentEl = safeGetElement('currentItem');
                    const actionEl = safeGetElement('actionArea');
                    const nextEl = safeGetElement('clarifyNext');
                    
                    if (currentEl) {
                        currentEl.innerHTML = `
                            <h4>Item ${gameState.currentItemIndex + 1} of ${gameState.capturedItems.length}</h4>
                            <p style="font-size: 1.1em; font-weight: bold;">${gameState.capturedItems[gameState.currentItemIndex]}</p>
                        `;
                    }
                    if (actionEl) actionEl.style.display = 'none';
                    if (nextEl) nextEl.style.display = 'none';
                } else {
                    showOrganizedResults();
                }
            }
            
            window.markActionable = function(isActionable) {
                const actionEl = safeGetElement('actionArea');
                const nextEl = safeGetElement('clarifyNext');
                
                if (isActionable) {
                    if (actionEl) actionEl.style.display = 'block';
                } else {
                    gameState.processedItems.reference.push(gameState.capturedItems[gameState.currentItemIndex]);
                    if (nextEl) nextEl.style.display = 'inline-block';
                }
            };
            
            window.setDuration = function(duration) {
                const nextActionEl = safeGetElement('nextAction');
                const nextEl = safeGetElement('clarifyNext');
                
                if (nextActionEl && nextEl) {
                    const nextAction = nextActionEl.value;
                    const currentItem = gameState.capturedItems[gameState.currentItemIndex];
                    
                    if (duration === 'under2') {
                        gameState.processedItems.doNow.push({ item: currentItem, action: nextAction });
                    } else {
                        gameState.processedItems.nextActions.push({ item: currentItem, action: nextAction });
                    }
                    
                    nextEl.style.display = 'inline-block';
                }
            };
            
            window.nextClarification = function() {
                gameState.currentItemIndex++;
                const nextActionEl = safeGetElement('nextAction');
                if (nextActionEl) nextActionEl.value = '';
                showCurrentItem();
            };
            
            function showOrganizedResults() {
                const clarifyEl = safeGetElement('clarifyArea');
                const organizedEl = safeGetElement('organizedLists');
                
                if (clarifyEl) clarifyEl.style.display = 'none';
                if (organizedEl) organizedEl.style.display = 'block';
                
                // Populate lists
                const doNowEl = safeGetElement('doNowList');
                const nextActionsEl = safeGetElement('nextActionsList');
                const referenceEl = safeGetElement('referenceList');
                
                if (doNowEl) {
                    doNowEl.innerHTML = gameState.processedItems.doNow.map(item => 
                        `<div class="task-item" onclick="toggleTask(this)" style="font-size: 0.9em;">${item.action || item.item}</div>`
                    ).join('');
                }
                
                if (nextActionsEl) {
                    nextActionsEl.innerHTML = gameState.processedItems.nextActions.map(item => 
                        `<div class="task-item" onclick="toggleTask(this)" style="font-size: 0.9em;">${item.action || item.item}</div>`
                    ).join('');
                }
                
                if (referenceEl) {
                    referenceEl.innerHTML = gameState.processedItems.reference.map(item => 
                        `<div style="padding: 5px; font-size: 0.9em; color: #666;">${item}</div>`
                    ).join('');
                }
            }
        }

        function createPickleJarWalkthrough() {
            const content = safeGetElement('walkthroughContent');
            if (!content) return;
            
            content.innerHTML = `
                <div class="walkthrough-steps">
                    <h3>🫙 Pickle Jar Theory</h3>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Understand the Metaphor</h4>
                        <p>Imagine your day as a pickle jar. You need to fit in big rocks (important tasks), pebbles (medium tasks), and sand (small tasks).</p>
                        <div class="interactive-demo">
                            <h4>🧪 The Pickle Jar Experiment</h4>
                            <p>Try filling the jar in different orders to see what happens:</p>
                            <div class="jar-container">
                                <div class="jar" id="jar">
                                    <div class="jar-contents" id="jarContents"></div>
                                </div>
                                <div style="margin: 20px 0;">
                                    <button class="btn" onclick="addToJar('rock')">🪨 Add Big Rock</button>
                                    <button class="btn" onclick="addToJar('pebble')">🪨 Add Pebbles</button>
                                    <button class="btn" onclick="addToJar('sand')">🏖️ Add Sand</button>
                                    <button class="btn btn-secondary" onclick="clearJar()">🔄 Clear Jar</button>
                                </div>
                                <div id="jarMessage" style="margin-top: 15px; font-weight: bold;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Identify Your Big Rocks</h4>
                        <p>Your big rocks are your most important tasks - the ones that move you toward your goals:</p>
                        <div class="interactive-demo">
                            <h4>🎯 Define Your Big Rocks</h4>
                            <p>What are your 3-5 most important priorities?</p>
                            <div id="bigRocks">
                                <input type="text" placeholder="Big Rock 1: Most important priority" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                                <input type="text" placeholder="Big Rock 2: Second priority" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                                <input type="text" placeholder="Big Rock 3: Third priority" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                                <input type="text" placeholder="Big Rock 4 (optional)" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                                <input type="text" placeholder="Big Rock 5 (optional)" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin: 5px 0;">
                            </div>
                            <button class="btn" onclick="createRockPlan()">🪨 Create My Rock Plan</button>
                            <div id="rockPlan" style="margin-top: 20px;"></div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Schedule Your Big Rocks First</h4>
                        <p>The key insight: Put your big rocks in your calendar FIRST, then fit pebbles and sand around them.</p>
                        <div style="background: #e8f5e8; border-radius: 10px; padding: 20px; margin: 15px 0;">
                            <h4>📅 Big Rock Scheduling Strategy</h4>
                            <ul>
                                <li><strong>Block prime time</strong> for your big rocks (when you're most alert)</li>
                                <li><strong>Protect these blocks</strong> - don't let small tasks invade</li>
                                <li><strong>Schedule weekly</strong> - plan your big rocks for the entire week</li>
                                <li><strong>Be realistic</strong> - don't overpack your jar</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Fill in with Pebbles and Sand</h4>
                        <p>After scheduling your big rocks, add:</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div style="background: #cff4fc; border-radius: 10px; padding: 20px;">
                                <h4>🪨 Pebbles (Medium Tasks)</h4>
                                <ul style="margin: 10px 0;">
                                    <li>Routine meetings</li>
                                    <li>Administrative work</li>
                                    <li>Moderate planning tasks</li>
                                    <li>Skill development</li>
                                </ul>
                            </div>
                            <div style="background: #fff3cd; border-radius: 10px; padding: 20px;">
                                <h4>🏖️ Sand (Small Tasks)</h4>
                                <ul style="margin: 10px 0;">
                                    <li>Quick emails</li>
                                    <li>File organization</li>
                                    <li>Brief check-ins</li>
                                    <li>Small errands</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">5</div>
                        <h4>Weekly Rock Review</h4>
                        <p>Every week, ask yourself:</p>
                        <ul>
                            <li>Did I complete my big rocks?</li>
                            <li>What prevented me from focusing on what's important?</li>
                            <li>How can I better protect my big rock time next week?</li>
                            <li>Do my big rocks still align with my goals?</li>
                        </ul>
                    </div>
                </div>
            `;
            
            gameState.jarSpace = 300;
            gameState.usedSpace = 0;
            
            window.addToJar = function(type) {
                const jar = safeGetElement('jarContents');
                const message = safeGetElement('jarMessage');
                
                if (!jar || !message) return;
                
                let itemSize, itemColor, itemText;
                
                switch(type) {
                    case 'rock':
                        itemSize = 80;
                        itemColor = '#8B4513';
                        itemText = '🪨';
                        break;
                    case 'pebble':
                        itemSize = 40;
                        itemColor = '#A0522D';
                        itemText = '🪨';
                        break;
                    case 'sand':
                        itemSize = 20;
                        itemColor = '#DDD';
                        itemText = '🏖️';
                        break;
                }
                
                if (gameState.usedSpace + itemSize <= gameState.jarSpace) {
                    const item = document.createElement('div');
                    item.style.width = '60px';
                    item.style.height = itemSize + 'px';
                    item.style.backgroundColor = itemColor;
                    item.style.borderRadius = type === 'sand' ? '0' : '10px';
                    item.style.margin = '2px';
                    item.style.display = 'flex';
                    item.style.alignItems = 'center';
                    item.style.justifyContent = 'center';
                    item.style.fontSize = type === 'sand' ? '0.8em' : '1em';
                    item.textContent = itemText;
                    
                    jar.appendChild(item);
                    gameState.usedSpace += itemSize;
                    
                    if (type === 'rock') {
                        message.textContent = '✅ Big rock fits! This represents your most important work.';
                        message.style.color = '#28a745';
                    } else if (type === 'pebble') {
                        message.textContent = '✅ Pebbles fit around the rocks! Medium tasks fill the gaps.';
                        message.style.color = '#17a2b8';
                    } else {
                        message.textContent = '✅ Sand fills the remaining space! Small tasks complete your day.';
                        message.style.color = '#ffc107';
                    }
                } else {
                    message.textContent = '❌ No space left! This shows why big rocks must go in first.';
                    message.style.color = '#dc3545';
                }
            };
            
            window.clearJar = function() {
                const jar = safeGetElement('jarContents');
                const message = safeGetElement('jarMessage');
                
                if (jar) jar.innerHTML = '';
                if (message) message.textContent = '';
                gameState.usedSpace = 0;
            };
            
            window.createRockPlan = function() {
                const inputs = document.querySelectorAll('#bigRocks input');
                const rocks = Array.from(inputs).map(input => input.value.trim()).filter(value => value);
                
                if (rocks.length > 0) {
                    let planHTML = `
                        <div style="background: #f8f9fa; border-radius: 10px; padding: 20px;">
                            <h4>🪨 Your Big Rocks Plan</h4>
                            <p>Schedule these FIRST in your calendar each week:</p>
                    `;
                    
                    rocks.forEach((rock, index) => {
                        planHTML += `
                            <div style="background: white; border-radius: 8px; padding: 15px; margin: 10px 0; border-left: 4px solid #667eea;">
                                <strong>Big Rock ${index + 1}:</strong> ${rock}
                                <br><small style="color: #666;">Schedule dedicated time blocks for this priority</small>
                            </div>
                        `;
                    });
                    
                    planHTML += `
                            <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 8px;">
                                <strong>🎯 Next Step:</strong> Open your calendar and block time for these big rocks before adding anything else!
                            </div>
                        </div>
                    `;
                    
                    const planEl = safeGetElement('rockPlan');
                    if (planEl) planEl.innerHTML = planHTML;
                }
            };
        }

        function createTaskBatchingWalkthrough() {
            const content = safeGetElement('walkthroughContent');
            if (!content) return;
            
            content.innerHTML = `
                <div class="walkthrough-steps">
                    <h3>📦 Task Batching Technique</h3>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <h4>Understand Task Batching</h4>
                        <p>Task batching means grouping similar tasks together and completing them in dedicated time blocks to minimize context switching.</p>
                        <div class="interactive-demo">
                            <h4>🧠 Context Switching Challenge</h4>
                            <p>See how context switching affects your performance:</p>
                            <div id="switchingGame" style="text-align: center; margin: 20px 0;">
                                <div id="taskDisplay" style="font-size: 1.5em; margin: 20px 0; min-height: 60px; background: #f8f9fa; border-radius: 10px; padding: 20px; display: flex; align-items: center; justify-content: center;">
                                    Click "Start Challenge" to begin!
                                </div>
                                <button class="btn" onclick="startSwitchingGame()">Start Challenge</button>
                                <div id="gameResults" style="margin-top: 15px;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h4>Identify Your Task Categories</h4>
                        <p>Group your tasks by similarity. Common categories include:</p>
                        <div class="interactive-demo">
                            <h4>📋 Build Your Task Batches</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                                <div class="batch-category" data-category="communication">
                                    <h4>📧 Communication</h4>
                                    <div class="batch-tasks" id="communication-tasks"></div>
                                    <input type="text" placeholder="Add communication task..." onkeypress="if(event.key==='Enter') addToBatch('communication', this)">
                                </div>
                                <div class="batch-category" data-category="creative">
                                    <h4>🎨 Creative Work</h4>
                                    <div class="batch-tasks" id="creative-tasks"></div>
                                    <input type="text" placeholder="Add creative task..." onkeypress="if(event.key==='Enter') addToBatch('creative', this)">
                                </div>
                                <div class="batch-category" data-category="administrative">
                                    <h4>📊 Administrative</h4>
                                    <div class="batch-tasks" id="administrative-tasks"></div>
                                    <input type="text" placeholder="Add admin task..." onkeypress="if(event.key==='Enter') addToBatch('administrative', this)">
                                </div>
                                <div class="batch-category" data-category="learning">
                                    <h4>📚 Learning/Research</h4>
                                    <div class="batch-tasks" id="learning-tasks"></div>
                                    <input type="text" placeholder="Add learning task..." onkeypress="if(event.key==='Enter') addToBatch('learning', this)">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h4>Schedule Your Batches</h4>
                        <p>Assign specific time blocks for each category:</p>
                        <div class="interactive-demo">
                            <h4>📅 Weekly Batching Schedule</h4>
                            <div style="background: #f8f9fa; border-radius: 10px; padding: 20px; margin: 15px 0;">
                                <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; margin-bottom: 20px;">
                                    <div style="font-weight: bold; text-align: center;">Mon</div>
                                    <div style="font-weight: bold; text-align: center;">Tue</div>
                                    <div style="font-weight: bold; text-align: center;">Wed</div>
                                    <div style="font-weight: bold; text-align: center;">Thu</div>
                                    <div style="font-weight: bold; text-align: center;">Fri</div>
                                    <div style="font-weight: bold; text-align: center;">Sat</div>
                                    <div style="font-weight: bold; text-align: center;">Sun</div>
                                </div>
                                <div id="scheduleGrid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px;">
                                    ${Array.from({length: 7}, (_, i) => `
                                        <div class="day-column" data-day="${i}" style="min-height: 200px; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
                                            <div class="time-slot" onclick="addBatchToSchedule(${i}, 'morning')" style="background: #fff3cd; margin: 5px 0; padding: 8px; border-radius: 4px; cursor: pointer; text-align: center; min-height: 40px;">
                                                <small>Morning</small>
                                                <div class="scheduled-batch"></div>
                                            </div>
                                            <div class="time-slot" onclick="addBatchToSchedule(${i}, 'afternoon')" style="background: #d4edda; margin: 5px 0; padding: 8px; border-radius: 4px; cursor: pointer; text-align: center; min-height: 40px;">
                                                <small>Afternoon</small>
                                                <div class="scheduled-batch"></div>
                                            </div>
                                            <div class="time-slot" onclick="addBatchToSchedule(${i}, 'evening')" style="background: #cff4fc; margin: 5px 0; padding: 8px; border-radius: 4px; cursor: pointer; text-align: center; min-height: 40px;">
                                                <small>Evening</small>
                                                <div class="scheduled-batch"></div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                                <div style="margin-top: 20px;">
                                    <strong>🎯 Batch to Schedule:</strong>
                                    <select id="batchSelector" style="margin-left: 10px; padding: 5px;">
                                        <option value="">Select a batch type...</option>
                                        <option value="📧 Communication">📧 Communication</option>
                                        <option value="🎨 Creative Work">🎨 Creative Work</option>
                                        <option value="📊 Administrative">📊 Administrative</option>
                                        <option value="📚 Learning">📚 Learning/Research</option>
                                    </select>
                                    <p style="margin-top: 10px; color: #666; font-size: 0.9em;">Select a batch type above, then click on time slots to schedule it.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <h4>Optimize Your Batching</h4>
                        <p>Make your batching more effective:</p>
                        <ul>
                            <li><strong>Match energy to tasks:</strong> Do creative work when you're fresh, admin when energy is lower</li>
                            <li><strong>Set time limits:</strong> Use timers to stay focused within each batch</li>
                            <li><strong>Minimize interruptions:</strong> Turn off notifications during batched work</li>
                            <li><strong>Prepare in advance:</strong> Have all materials ready before starting a batch</li>
                            <li><strong>Take breaks between batches:</strong> Allow your brain to reset between different types of work</li>
                        </ul>
                    </div>
                </div>
            `;
            
            gameState.gameStarted = false;
            gameState.gameScore = 0;
            gameState.gameRound = 0;
            gameState.gameStartTime = 0;
            
            const switchingTasks = [
                { type: 'math', task: '15 + 23 = ?', answer: '38' },
                { type: 'word', task: 'Spell: EFFICIENCY', answer: 'EFFICIENCY' },
                { type: 'math', task: '8 × 7 = ?', answer: '56' },
                { type: 'word', task: 'Antonym of: EASY', answer: 'HARD' },
                { type: 'math', task: '64 ÷ 8 = ?', answer: '8' },
                { type: 'word', task: 'Rhymes with: CAT', answer: 'HAT' }
            ];
            
            window.startSwitchingGame = function() {
                gameState.gameStarted = true;
                gameState.gameScore = 0;
                gameState.gameRound = 0;
                gameState.gameStartTime = Date.now();
                
                const startBtn = document.querySelector('[onclick="startSwitchingGame()"]');
                if (startBtn) startBtn.style.display = 'none';
                
                showNextTask();
            };
            
            function showNextTask() {
                if (gameState.gameRound < switchingTasks.length) {
                    const task = switchingTasks[gameState.gameRound];
                    const displayEl = safeGetElement('taskDisplay');
                    
                    if (displayEl) {
                        displayEl.innerHTML = `
                            <div style="color: ${task.type === 'math' ? '#dc3545' : '#28a745'};">
                                ${task.type === 'math' ? '🔢' : '📝'} ${task.task}
                            </div>
                            <input type="text" id="gameAnswer" style="margin-top: 10px; padding: 8px; font-size: 1em;" onkeypress="if(event.key==='Enter') checkAnswer()">
                            <br><button class="btn" onclick="checkAnswer()" style="margin-top: 10px;">Submit</button>
                        `;
                        
                        const answerInput = safeGetElement('gameAnswer');
                        if (answerInput) answerInput.focus();
                    }
                } else {
                    endGame();
                }
            }
            
            window.checkAnswer = function() {
                const answerInput = safeGetElement('gameAnswer');
                if (!answerInput) return;
                
                const userAnswer = answerInput.value.toUpperCase();
                const correctAnswer = switchingTasks[gameState.gameRound].answer.toUpperCase();
                
                if (userAnswer === correctAnswer) {
                    gameState.gameScore++;
                }
                
                gameState.gameRound++;
                setTimeout(showNextTask, 500);
            };
            
            function endGame() {
                const totalTime = (Date.now() - gameState.gameStartTime) / 1000;
                const displayEl = safeGetElement('taskDisplay');
                const resultsEl = safeGetElement('gameResults');
                
                if (displayEl) displayEl.innerHTML = '🎯 Challenge Complete!';
                if (resultsEl) {
                    resultsEl.innerHTML = `
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 15px;">
                            <h4>Results:</h4>
                            <p><strong>Score:</strong> ${gameState.gameScore}/${switchingTasks.length} correct</p>
                            <p><strong>Time:</strong> ${totalTime.toFixed(1)} seconds</p>
                            <p style="color: #667eea; margin-top: 15px;">
                                <strong>💡 Notice:</strong> Switching between math and word tasks slowed you down! 
                                This is why batching similar tasks together is so powerful.
                            </p>
                        </div>
                    `;
                }
            }
            
            window.addToBatch = function(category, input) {
                const taskText = input.value.trim();
                if (taskText) {
                    const tasksContainer = safeGetElement(category + '-tasks');
                    if (tasksContainer) {
                        const taskDiv = document.createElement('div');
                        taskDiv.className = 'batch-task-item';
                        taskDiv.textContent = taskText;
                        taskDiv.onclick = function() { this.remove(); };
                        tasksContainer.appendChild(taskDiv);
                    }
                    input.value = '';
                }
            };
            
            window.addBatchToSchedule = function(day, timeSlot) {
                const selector = safeGetElement('batchSelector');
                if (!selector) return;
                
                const selectedBatch = selector.value;
                if (selectedBatch) {
                    const dayColumns = document.querySelectorAll('.day-column');
                    if (dayColumns[day]) {
                        const slots = dayColumns[day].querySelectorAll('.time-slot');
                        const targetSlot = Array.from(slots).find(slot => 
                            slot.getAttribute('onclick').includes(timeSlot)
                        );
                        
                        if (targetSlot) {
                            const batchDiv = targetSlot.querySelector('.scheduled-batch');
                            if (batchDiv) {
                                batchDiv.textContent = selectedBatch;
                                batchDiv.style.fontWeight = 'bold';
                                batchDiv.style.color = '#667eea';
                            }
                        }
                    }
                }
            };
        }

        // Universal task toggle function
        function toggleTask(element) {
            element.classList.toggle('completed');
        }
    </script>
</body>
</html>